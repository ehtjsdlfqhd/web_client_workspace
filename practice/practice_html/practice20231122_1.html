<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>실습문제_closure</title>
</head>
<body>
  <h4>@실습문제1 : 눈코딩</h4>
	<button onclick="aoo()();">aoo</button>
	<button onclick="boo()();">boo1</button>
	<button onclick="boo()(999);">boo2</button>
	<button onclick="coo(3)(5);">coo1</button>
	<button onclick="coo()(5);">coo2</button>
    <ul>
        <li>aoo = 100 (함수 안의 자유변수 a 참조)</li>
        <li>boo1 = 99 (함수 안의 자유변수 b 참조, return값은 관계없음)</li>
        <li>boo1 오답 = undefined 출력됨. b의 값이 없기때문</li>
        <li>boo2 = 999 (c 값을 지정해줌)</li>
        <li>coo1 = 자유변수 c=3, 지역변수 n=5 3 * 5 = 15</li>
        <li>coo2 = c값이 지정되지 않아 c * n = undefined 출력</li>
        <li>coo2 오답 = undefined와 관련된 연산은 모두 NaN출력됨. 😮</li>
    </ul>
	<script>
	const a = 1;
	const aoo = () => {
		const a = 100;
		return () => console.log(a);
	}

	const b = 9;
	const boo = () => {
		const b = 99;
		return (b) => console.log(b);
	}

	const coo = (c) => {
		return (n) => {
		  console.log(c * n);
		}
	}
	</script>

	<h3>@실습문제2</h3>
	<!-- 
		임의의 숫자를 더해가는 가산기를 만들어보세요.
		사용자는 input#myadder를 통해 값을 입력하고, 
		가산기는 입력값만큼 증가시켜서 #result에 현재까지의 합을 출력합니다.
	-->
	</pi>
	<fieldset>
		<legend>가산기</legend>
		<input type="number" id="myadder" placeholder="숫자를 입력하세요." >
		<button onclick="addFunc();">+</button>
		<p id="result"></p>
	</fieldset>

	<script>
	const mkAddFunc = () => {
		let sum = 0;
		return () => {
			const myadder = document.querySelector("#myadder");
			// id값만으로도 참조할 수 있지만 위험도가 있기때문에 선언해주는게 좋음
			if(isNaN(myadder.value)) return;
			sum += Number(myadder.value);
			// 문자열로 값을 받았기 때문에 + 연산을 위해 숫자로 바꿔줌
			result.innerHTML = sum;
		}
		// 자유변수 sum까지 포함해서 반환
	};
	const addFunc = mkAddFunc();
	</script>
</body>
</html>